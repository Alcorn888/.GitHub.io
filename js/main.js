require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery.min",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.printVideo("antiq"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0})},100);break;case"#video/story":app.printVideo("story"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням")},100);break;case"#video/history":app.printVideo("history"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории")},100);break;case"#games/antiq":app.printMap("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.testCleared(),Backbone.history.fragment=null,Backbone.history.navigate("#lessons",!0);break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.on("Display:Load",function(t){e.render()})},route:function(e,t){this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(s,o){t[a+"Html"]=$(o),_.extend(t,s),t.loadCss(a,"module"),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start({pushState:!1}),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},s=this;s.settings={};var o=function(){s.settings=e.extend({},r,a),s.el=t,n()},n=function(){var t="",a="",r="",o="",n=s.settings.preload,p=s.settings.autoplay,c=s.settings.loop;a=n?'preload="false"':"",r=p?'autoplay="false"':"",o=c?'loop="false"':"",t+='<video id="'+s.settings.videoid+'"'+a+r+o,s.settings.poster&&(t+=' poster="'+s.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var d=0;d<s.settings.types.length;d++)t+='<source src="'+s.settings.path+s.settings.filename+"."+s.settings.types[d]+'" type="video/'+s.settings.types[d]+'" />';t+="</video>",s.el.append(t),s.videoEl=document.getElementById(s.settings.videoid),s.$videoEl=e(s.videoEl),s.$videoEl.fadeIn(0),i()},i=function(){var e=p();s.$videoEl.width(e*s.settings.width),s.$videoEl.height(e*s.settings.height),"undefined"!=typeof s.settings.align&&c()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,o=s.settings.width/s.settings.height,n=a/s.settings.height;return r>=o&&(n=t/s.settings.width),n},c=function(){var t=(e(window).width()>>1)-(s.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(s.$videoEl.height()>>1)|0;return"centerXY"==s.settings.align?void s.$videoEl.css({left:t,top:a}):"centerX"==s.settings.align?void s.$videoEl.css("left",t):"centerY"==s.settings.align?void s.$videoEl.css("top",a):void 0};o(),e(window).resize(function(){i()})}}($),function(e){var t={init:function(){e(window).resize(function(){e(document).setPoints("setProportion")})},setProportion:function(){if(e(".maps.active .responsive-image").length&&e(".maps.active .set-points").length){var t=e(".maps.active .responsive-image").css("backgroundImage").replace(/url\("|"\)/gi,""),a=new Image;a.onload=function(){var t=a.width,r=a.height,s=e(".maps.active .set-points").get(),o=e(".maps.active .responsive-image").get(),n=e(o).width(),i=e(o).height(),p=t/r,c=n/i;if(c>p){var d=parseInt(r*n/t);e(s).height(d).width("100%").css("left","0")}if(p>c){var l=parseInt(t*i/r);e(s).width(l).height("100%").css("left",-parseInt((l-n)/2))}},a.src=t}}};e.fn.setPoints=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Метод с именем "+a+" не существует в setPoints"):t.init.apply(this,arguments)},e(document).setPoints("init")}($),jQuery.ajax=function(e){function t(e){return!s.test(e)&&/:\/\//.test(e)}var a=location.protocol,r=location.hostname,s=RegExp(a+"//"+r),o="http"+(/^https/.test(a)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",n='select * from html where url="{URL}" and xpath="*"';return function(a){var r=a.url;return/get/i.test(a.type)&&!/json/i.test(a.dataType)&&t(r)&&(a.url=o,a.dataType="json",a.data={q:n.replace("{URL}",r+(a.data?(/\?/.test(r)?"&":"?")+jQuery.param(a.data):"")),format:"xml"},!a.success&&a.complete&&(a.success=a.complete,delete a.complete),a.success=function(e){return function(t){e&&e.call(this,{responseText:(t.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(a.success)),e.apply(this,arguments)}}(jQuery.ajax)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInByaW50Qm9va1BhZ2VzIiwiYnJlYWRjcnVtYnNSZW5kZXIiLCJnb1RvcCIsInJlcGxhY2UiLCJwcmludFZpZGVvIiwic2V0VGltZW91dCIsImdvQm90dG9tIiwicHJpbnRNYXAiLCJnb0JhY2siLCJ0ZXN0QnJlYWRjcnVtYnNSZW5kZXIiLCJnb0Zyb250IiwiZ2V0QWN0aXZlVGFiIiwidGVzdENsZWFyZWQiLCJmcmFnbWVudCIsImF1ZGlvU3dpY3RjaGVyIiwiZGVhY3RpdmF0ZVF1ZXN0aW9uIiwiY2hlY2tJbWFnZVByb2dyZXNzIiwid2luZG93IiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsImxlbmd0aCIsIm1kIiwicGFydFVwbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJyZWwiLCJocmVmIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZSIsInNlbGVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiY29tcGlsZSIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsIiIsImxlc3NvbnMiLCJnYW1lcy86dGVzdCIsImJvb2svOm5hbWUiLCJ2aWRlby86bmFtZSIsInJvdXRlciIsInN0YXJ0IiwicHVzaFN0YXRlIiwiYmFja2dyb3VuZFZpZGVvIiwiZGVmYXVsdHMiLCJ2aWRlb2lkIiwiYXV0b3BsYXkiLCJsb29wIiwicHJlbG9hZCIsInBsdWdpbiIsInNldHRpbmdzIiwiaW5pdCIsImJ1aWxkVmlkZW8iLCJwcmVsb2FkU3RyaW5nIiwiYXV0b3BsYXlTdHJpbmciLCJsb29wU3RyaW5nIiwiX3ByZWxvYWQiLCJfYXV0b3BsYXkiLCJfbG9vcCIsInBvc3RlciIsInR5cGVzIiwicGF0aCIsImZpbGVuYW1lIiwiYXBwZW5kIiwidmlkZW9FbCIsImdldEVsZW1lbnRCeUlkIiwiJHZpZGVvRWwiLCJmYWRlSW4iLCJzZXRQcm9wb3J0aW9uIiwicHJvcG9ydGlvbiIsImdldFByb3BvcnRpb24iLCJ3aWR0aCIsImhlaWdodCIsImFsaWduIiwiY2VudGVyVmlkZW8iLCJ3aW5kb3dXaWR0aCIsIndpbmRvd0hlaWdodCIsIndpbmRvd1Byb3BvcnRpb24iLCJvcmlnUHJvcG9ydGlvbiIsImNlbnRlclgiLCJjZW50ZXJZIiwibGVmdCIsInRvcCIsInJlc2l6ZSIsIm1ldGhvZHMiLCJzZXRQb2ludHMiLCJpbWdTcmMiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIndpZHRoSW1nIiwiaGVpZ2h0SW1nIiwiY29udGFpbmVyU2V0IiwiZ2V0IiwiY29udGFpbmVyIiwid2lkdGhDb250YWluZXIiLCJoZWlnaHRDb250YWluZXIiLCJhc3BlY3RyYXRpb0ltYWdlIiwiYXNwZWN0cmF0aW9Db250YWluZXIiLCJyZXN1bHRIZWlnaHQiLCJwYXJzZUludCIsInJlc3VsdFdpZHRoIiwic3JjIiwibWV0aG9kIiwiYXBwbHkiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImVycm9yIiwialF1ZXJ5IiwiYWpheCIsIl9hamF4IiwiaXNFeHRlcm5hbCIsImV4UmVnZXgiLCJ0ZXN0IiwicHJvdG9jb2wiLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiUmVnRXhwIiwiWVFMIiwicXVlcnkiLCJvIiwiZGF0YVR5cGUiLCJxIiwicGFyYW0iLCJmb3JtYXQiLCJzdWNjZXNzIiwiY29tcGxldGUiLCJfc3VjY2VzcyIsInJlc3BvbnNlVGV4dCIsInJlc3VsdHMiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRQyxRQUNQQyxRQUFTLFNBQ1RDLE9BQ0NDLE9BQVUseUJBQ1ZDLFNBQVksb0JBQ1pDLEtBQVEsWUFDUkMsV0FBYyx3QkFDZEMsV0FBYyx3QkFDZEMsU0FBWSxnQ0FFYkMsTUFDQ0wsVUFDQ00sTUFBTyxhQUFjLGFBS3hCLElBQUlDLEtBQ0hDLFVBQ0RiLFVBQ0MsYUFDQSxTQUNBLE9BQ0EsV0FDQSxhQUNBLFlBQ0UsU0FBU1EsR0FDWEssV0FBYUwsRUFFYkssV0FBV0MsZUFBZSxPQUFRLFNBQVNDLEVBQVFDLEVBQVVDLEVBQVFDLEdBSWpFLE1BSEFILEdBQVNJLFdBQVdKLEdBQ3BCRSxFQUFTRSxXQUFXRixJQUdoQkcsSUFBS0wsRUFBU0UsRUFDZEksSUFBS04sRUFBU0UsRUFDZEssSUFBS1AsRUFBU0UsRUFDZE0sSUFBS1IsRUFBU0UsRUFDZE8sSUFBS1QsRUFBU0UsRUFDZFEsS0FBTVYsR0FBVUUsR0FDbEJELEtBRU5ILFdBQVdDLGVBQWUsU0FBVSxTQUFVWSxFQUFJVixFQUFVVyxFQUFJVCxHQUU1RCxPQUFRRixHQUNKLElBQUssS0FDRCxNQUFRVSxJQUFNQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMzRCxLQUFLLE1BQ0QsTUFBUUgsS0FBT0MsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDNUQsS0FBSyxJQUNELE1BQWFGLEdBQUxELEVBQVdSLEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzFELEtBQUssS0FDRCxNQUFjRixJQUFORCxFQUFZUixFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMzRCxLQUFLLElBQ0QsTUFBUUgsR0FBS0MsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDMUQsS0FBSyxLQUNELE1BQVFILElBQU1DLEVBQU1ULEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssS0FDRCxNQUFRSCxJQUFNQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMzRCxLQUFLLEtBQ0QsTUFBUUgsSUFBTUMsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDM0QsU0FDSSxNQUFPWCxHQUFRWSxRQUFRRCxTQUluQ0UsSUFBTUMsU0FBU0MsS0FBS0MsUUFDbkJDLEdBQUlDLEVBQUUsUUFDTkMsUUFDR0MsVUFBVSxRQUVaQyxLQUFNLFNBQVNDLEdBQ2JBLEVBQUVDLGdCQUVKLElBQUlDLEdBQU1OLEVBQUVJLEVBQUVHLFFBQVFDLFFBQVEsS0FBS0MsS0FBSyxPQUV4QyxRQUFRSCxHQUNQLElBQUssV0FDSk4sRUFBRSxhQUFhVSxJQUFJLGFBQWEsVUFDaENkLFNBQVNlLFFBQVFDLFNBQVMsWUFBYUMsU0FBUSxHQUMvQyxNQUVELEtBQUssZ0JBQ0pyQyxJQUFJc0MsZUFBZSxXQUNuQnRDLElBQUl1QyxrQkFBa0IseUJBQXlCLDRCQUMvQ3ZDLElBQUl3QyxRQUNKcEIsU0FBU2UsUUFBUUMsU0FBU04sR0FBTU8sU0FBUSxFQUFNSSxTQUFRLEdBQ3RELE1BRUQsS0FBSyxjQUNKekMsSUFBSXNDLGVBQWUsU0FDbkJ0QyxJQUFJdUMsa0JBQWtCLHlCQUF5Qix3QkFDL0N2QyxJQUFJd0MsUUFDSnBCLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUVELEtBQUssY0FDSnpDLElBQUlzQyxlQUFlLFNBQ25CdEMsSUFBSXVDLGtCQUFrQix5QkFBeUIsbUJBQy9DdkMsSUFBSXdDLFFBQ0pwQixTQUFTZSxRQUFRQyxTQUFTTixHQUFNTyxTQUFRLEVBQU1JLFNBQVEsR0FDdEQsTUFFRCxLQUFLLGVBQ0R6QyxJQUFJMEMsV0FBVyxTQUNmQyxXQUFXLFdBQ1YzQyxJQUFJNEMsV0FDSjVDLElBQUl1QyxrQkFBa0IseUJBQXlCLG1CQUNsRG5CLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxLQUNsRCxJQUNMLE1BQ0QsS0FBSyxlQUNKekMsSUFBSTBDLFdBQVcsU0FDZkMsV0FBVyxXQUNWM0MsSUFBSTRDLFdBQ0o1QyxJQUFJdUMsa0JBQWtCLHlCQUF5Qix5QkFDOUMsSUFDRixNQUVELEtBQUssaUJBQ0p2QyxJQUFJMEMsV0FBVyxXQUNmQyxXQUFXLFdBQ1YzQyxJQUFJNEMsV0FDSjVDLElBQUl1QyxrQkFBa0IseUJBQXlCLDZCQUM5QyxJQUNGLE1BRUQsS0FBSyxlQUNKdkMsSUFBSTZDLFNBQVMsU0FFWjdDLElBQUk4QyxTQUNEOUMsSUFBSStDLHNCQUFzQixPQUFPLGtCQUFrQixTQUN2RDNCLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUVELEtBQUssZUFDSnpDLElBQUk2QyxTQUFTLFNBRVY3QyxJQUFJOEMsU0FDRjlDLElBQUkrQyxzQkFBc0IsT0FBTyxnQkFBZ0IsU0FDdEQzQixTQUFTZSxRQUFRQyxTQUFTTixHQUFNTyxTQUFRLEVBQU1JLFNBQVEsR0FDdEQsTUFFRCxLQUFLLGlCQUNKekMsSUFBSTZDLFNBQVMsV0FFVjdDLElBQUk4QyxTQUNKOUMsSUFBSStDLHNCQUFzQixPQUFPLDJCQUEyQixXQUMvRDNCLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUVELEtBQUssV0FDSnpDLElBQUlnRCxVQUNKaEQsSUFBSXVDLGtCQUFrQix5QkFBeUJ2QyxJQUFJaUQsZ0JBQ25EN0IsU0FBU2UsUUFBUUMsU0FBUyxZQUFhQyxTQUFRLEVBQU1JLFNBQVEsR0FDN0QsTUFFRCxLQUFLLFNBQ0p6QyxJQUFJa0QsY0FDSjlCLFNBQVNlLFFBQVFnQixTQUFXLEtBQ3RCL0IsU0FBU2UsUUFBUUMsU0FBUyxZQUFZLEVBRTVDLE1BRUQsS0FBSyxTQUNKcEMsSUFBSW9ELGdCQUNKLE1BRUQsS0FBSyxtQkFDSnBELElBQUk0QyxVQUNKLE1BRUQsS0FBSyxtQkFDSjVDLElBQUlxRCxtQkFBbUJwQyxNQUN2QmpCLElBQUlzRCxxQkFDSnRELElBQUlnRCxVQUNKaEQsSUFBSXVDLGtCQUFrQix5QkFBeUIsa0JBQy9DLE1BRUQsS0FBSyxtQkFDSnZDLElBQUlxRCxtQkFBbUJwQyxNQUN2QmpCLElBQUlzRCxxQkFDSnRELElBQUlnRCxVQUNKaEQsSUFBSXVDLGtCQUFrQix5QkFBeUIsdUJBQy9DLE1BRUQsS0FBSyxxQkFDSnZDLElBQUlxRCxtQkFBbUJwQyxNQUN2QmpCLElBQUlzRCxxQkFDSnRELElBQUlnRCxVQUNKaEQsSUFBSXVDLGtCQUFrQix5QkFBeUIsMkJBQy9DLE1BQ0QsS0FBSywwQkFDSmdCLE9BQU81QixLQUFLLGtDQUFtQyxZQUlsRDZCLFdBQVksV0FDWCxHQUFJQyxHQUFPeEMsSUFFWEEsTUFBS3lDLEdBQUcsZUFBZ0IsU0FBU0MsR0FDaENGLEVBQUtHLFlBTVBDLE1BQU8sU0FBU0MsRUFBTUMsR0FFckI5QyxLQUFLNkMsS0FBT0EsRUFHUEMsR0FJSjlDLEtBQUsrQyxZQUFZRCxHQUVqQjlDLEtBQUtnRCxJQUFJLGVBQWVQLEdBQUcsY0FBZSxTQUFTUSxHQUNsRGpELEtBQUtrRCxhQUFhbEQsS0FBSzZDLE1BQ3ZCTSxRQUFRQyxJQUFJLHVCQUF5QkgsRUFBVSxlQUMvQ0UsUUFBUUMsSUFBSSxtQkFBcUJwRCxLQUFLNkMsS0FBTyxpQkFSOUM3QyxLQUFLa0QsYUFBYUwsSUFhcEJLLGFBQWMsU0FBU1IsR0FDdEIsR0FBSUYsR0FBT3hDLElBQ1g3QixVQUNDLDJCQUE2QnVFLEVBQWMsSUFBTUEsRUFDakQsZ0NBQWtDQSxFQUFjLElBQU1BLEVBQWMsU0FDbEUsU0FBU1csRUFBSUMsR0FFZkMsRUFBRWxELE9BQU9tQyxFQUFNYSxHQUNmYixFQUFLYyxLQUFPL0MsRUFBRStDLEdBQ2RkLEVBQUtnQixRQUFRZCxFQUFhLFdBQzFCRixFQUFLcEIsUUFBUSxlQUFnQnNCLE1BSS9CSyxZQUFhLFNBQVNELEdBQ3JCLEdBQUlOLEdBQU94QyxJQUVYOEMsR0FBWVcsUUFBUSxTQUFTQyxFQUFRQyxHQUVuQ3hGLFNBQ0MsMEJBQTRCdUYsRUFBUyxJQUFNQSxFQUMzQywrQkFBaUNBLEVBQVMsSUFBTUEsRUFBUyxTQUN2RCxTQUFTTCxFQUFJQyxHQUVmZCxFQUFLa0IsRUFBUyxRQUFVbkQsRUFBRStDLEdBQzFCQyxFQUFFbEQsT0FBT21DLEVBQU1hLEdBQ2ZiLEVBQUtnQixRQUFRRSxFQUFRLFVBQ2pCWixFQUFZYyxPQUFTLElBQU9ELEdBQy9CbkIsRUFBS3BCLFFBQVEsY0FBZTBCLFFBVWpDVSxRQUFTLFNBQVNFLEVBQVFHLEdBQ3pCLEdBQUlDLEdBQWlCLFlBQVBELEVBQW1CLFdBQWEsVUFDMUNoQixFQUFPa0IsU0FBU0MsY0FBYyxPQUNsQ25CLEdBQUtvQixLQUFPLFdBQ1pwQixFQUFLcUIsSUFBTSxhQUNYckIsRUFBS3NCLEtBQU8sa0JBQW9CTCxFQUFVLElBQU1KLEVBQVMsSUFBTUEsRUFBUyxPQUN4RUssU0FBU0sscUJBQXFCLFFBQVEsR0FBR0MsWUFBWXhCLElBR3REeUIseUJBQTBCLFNBQVNDLEVBQVNDLEdBRzNDLEdBQUlDLEdBQVd6RixXQUFXMEYsUUFBUW5FLEVBQUVnRSxHQUFVakIsT0FDOUMsT0FBT21CLEdBQVNELE1BR2xCekYsSUFBTSxHQUFJbUIsSUFFVixJQUFJeUUsR0FBWXhFLFNBQVN5RSxPQUFPdkUsUUFDNUJ3RSxRQUNJQyxHQUFJLGVBQ0pDLFFBQVUsVUFDVkMsY0FBYyxRQUNkQyxhQUFhLFNBQ2JDLGNBQWMsV0FLbEJDLEVBQVMsR0FBSVIsRUFFakJRLEdBQU8xQyxHQUFHLHFCQUFzQixXQUM1QjFELElBQUk2RCxNQUFNLGNBQWUsZ0JBRzdCdUMsRUFBTzFDLEdBQUcsZ0JBQWlCLFdBQ3ZCMUQsSUFBSTZELE1BQU0sV0FBWSxZQUFZLFlBQWEsV0FBVyxTQUFVLGdCQUFnQixPQUFPLFFBQVEsUUFBUSxVQUUzR2xCLFdBQVcsV0FDVDNDLElBQUl1QyxrQkFBa0IseUJBQXlCdkMsSUFBSWlELGlCQUNuRCxPQUdObUQsRUFBTzFDLEdBQUcsY0FBZSxXQUNyQjFELElBQUk2RCxNQUFNLFdBQVksWUFBWSxZQUFhLFdBQVcsU0FBVSxnQkFBZ0IsT0FBTyxRQUFRLFFBQVEsVUFFM0dsQixXQUFXLFdBQ1QzQyxJQUFJdUMsa0JBQWtCLHlCQUF5QnZDLElBQUlpRCxpQkFDbkQsT0FHTm1ELEVBQU8xQyxHQUFHLGVBQWdCLFdBQ3RCMUQsSUFBSTZELE1BQU0sV0FBWSxZQUFZLFlBQWEsV0FBVyxTQUFVLGdCQUFnQixPQUFPLFFBQVEsUUFBUSxVQUUzR2xCLFdBQVcsV0FDVDNDLElBQUl1QyxrQkFBa0IseUJBQXlCdkMsSUFBSWlELGlCQUNuRCxPQUdObUQsRUFBTzFDLEdBQUcsY0FBZSxXQUNyQjFELElBQUk2RCxNQUFNLFdBQVksWUFBWSxZQUFhLFdBQVcsU0FBVSxnQkFBZ0IsT0FBTyxRQUFRLFFBQVEsVUFFM0dsQixXQUFXLFdBQ1QzQyxJQUFJdUMsa0JBQWtCLHlCQUF5QnZDLElBQUlpRCxpQkFDbkQsT0FHTm1ELEVBQU8xQyxHQUFHLGNBQWUsV0FDckIxRCxJQUFJNkQsTUFBTSxXQUFZLFlBQVksWUFBYSxXQUFXLFNBQVUsZ0JBQWdCLE9BQU8sUUFBUSxRQUFRLFVBRTNHbEIsV0FBVyxXQUNUM0MsSUFBSXVDLGtCQUFrQix5QkFBeUJ2QyxJQUFJaUQsaUJBQ25ELE9BSU43QixTQUFTZSxRQUFRa0UsT0FBT0MsV0FBWSxJQVNwQyxTQUFVOUUsR0FFUkEsRUFBRStFLGdCQUFrQixTQUFTaEYsRUFBSWpCLEdBRS9CLEdBQUlrRyxJQUNGQyxRQUFTLG1CQUNUQyxVQUFVLEVBQ1ZDLE1BQU0sRUFDTkMsU0FBUyxHQUdQQyxFQUFTNUYsSUFFYjRGLEdBQU9DLFdBRVAsSUFBSUMsR0FBTyxXQUNURixFQUFPQyxTQUFXdEYsRUFBRUYsVUFBV2tGLEVBQVVsRyxHQUN6Q3VHLEVBQU90RixHQUFLQSxFQUVaeUYsS0FHRUEsRUFBYSxXQUNmLEdBQUl6QyxHQUFPLEdBQ1AwQyxFQUFnQixHQUNoQkMsRUFBaUIsR0FDakJDLEVBQWEsR0FDYkMsRUFBV1AsRUFBT0MsU0FBU0YsUUFDM0JTLEVBQVlSLEVBQU9DLFNBQVNKLFNBQzVCWSxFQUFRVCxFQUFPQyxTQUFTSCxJQUcxQk0sR0FERUcsRUFDYyxrQkFFQSxHQUloQkYsRUFERUcsRUFDZSxtQkFFQSxHQUlqQkYsRUFERUcsRUFDVyxlQUVBLEdBR2YvQyxHQUFRLGNBQWNzQyxFQUFPQyxTQUFTTCxRQUFRLElBQU1RLEVBQWdCQyxFQUFpQkMsRUFFakZOLEVBQU9DLFNBQVNTLFNBQ2xCaEQsR0FBUSxZQUFjc0MsRUFBT0MsU0FBU1MsT0FBUyxNQUdqRGhELEdBQVEsc0dBQ1IsS0FBSSxHQUFJSyxHQUFFLEVBQUdBLEVBQUlpQyxFQUFPQyxTQUFTVSxNQUFNM0MsT0FBUUQsSUFDN0NMLEdBQVEsZ0JBQWdCc0MsRUFBT0MsU0FBU1csS0FBS1osRUFBT0MsU0FBU1ksU0FBUyxJQUFJYixFQUFPQyxTQUFTVSxNQUFNNUMsR0FBRyxpQkFBaUJpQyxFQUFPQyxTQUFTVSxNQUFNNUMsR0FBRyxNQUUvSUwsSUFBUSxXQUNSc0MsRUFBT3RGLEdBQUdvRyxPQUFPcEQsR0FDakJzQyxFQUFPZSxRQUFVNUMsU0FBUzZDLGVBQWVoQixFQUFPQyxTQUFTTCxTQUN6REksRUFBT2lCLFNBQVd0RyxFQUFFcUYsRUFBT2UsU0FDM0JmLEVBQU9pQixTQUFTQyxPQUFPLEdBQ3ZCQyxLQUdFQSxFQUFnQixXQUNsQixHQUFJQyxHQUFhQyxHQUNqQnJCLEdBQU9pQixTQUFTSyxNQUFNRixFQUFXcEIsRUFBT0MsU0FBU3FCLE9BQ2pEdEIsRUFBT2lCLFNBQVNNLE9BQU9ILEVBQVdwQixFQUFPQyxTQUFTc0IsUUFFYixtQkFBMUJ2QixHQUFPQyxTQUFTdUIsT0FDekJDLEtBSUFKLEVBQWdCLFdBQ2xCLEdBQUlLLEdBQWMvRyxFQUFFK0IsUUFBUTRFLFFBQ3hCSyxFQUFlaEgsRUFBRStCLFFBQVE2RSxTQUN6QkssRUFBbUJGLEVBQWNDLEVBQ2pDRSxFQUFpQjdCLEVBQU9DLFNBQVNxQixNQUFRdEIsRUFBT0MsU0FBU3NCLE9BQ3pESCxFQUFhTyxFQUFlM0IsRUFBT0MsU0FBU3NCLE1BTWhELE9BSklLLElBQW9CQyxJQUN0QlQsRUFBYU0sRUFBYzFCLEVBQU9DLFNBQVNxQixPQUd0Q0YsR0FHTEssRUFBYyxXQUNoQixHQUFJSyxJQUFZbkgsRUFBRStCLFFBQVE0RSxTQUFXLElBQU10QixFQUFPaUIsU0FBU0ssU0FBVyxHQUFNLEVBQ3hFUyxHQUFZcEgsRUFBRStCLFFBQVE2RSxVQUFZLElBQU12QixFQUFPaUIsU0FBU00sVUFBWSxHQUFNLENBRTlFLE9BQTZCLFlBQXpCdkIsRUFBT0MsU0FBU3VCLFVBQ2xCeEIsR0FBT2lCLFNBQVM1RixLQUFNMkcsS0FBUUYsRUFBU0csSUFBT0YsSUFJbkIsV0FBekIvQixFQUFPQyxTQUFTdUIsVUFDbEJ4QixHQUFPaUIsU0FBUzVGLElBQUksT0FBUXlHLEdBSUQsV0FBekI5QixFQUFPQyxTQUFTdUIsVUFDbEJ4QixHQUFPaUIsU0FBUzVGLElBQUksTUFBTzBHLEdBRDdCLE9BTUY3QixLQUVBdkYsRUFBRStCLFFBQVF3RixPQUFPLFdBQWFmLFFBRS9CeEcsR0FTSCxTQUFVQSxHQUVULEdBQUl3SCxJQUNIakMsS0FBTyxXQUNOdkYsRUFBRStCLFFBQVF3RixPQUFPLFdBQWF2SCxFQUFFd0QsVUFBVWlFLFVBQVUsb0JBRXJEakIsY0FBZ0IsV0FDZixHQUFJeEcsRUFBRSxrQ0FBa0NxRCxRQUFVckQsRUFBRSw0QkFBNEJxRCxPQUFRLENBQ3ZGLEdBQUlxRSxHQUFTMUgsRUFBRSxrQ0FBa0NVLElBQUksbUJBQW1CTyxRQUFRLGVBQWUsSUFDM0YwRyxFQUFNLEdBQUlDLE1BQ2RELEdBQUlFLE9BQVMsV0FDWixHQUFJQyxHQUFXSCxFQUFJaEIsTUFDZm9CLEVBQVlKLEVBQUlmLE9BQ2hCb0IsRUFBZWhJLEVBQUUsNEJBQTRCaUksTUFDN0NDLEVBQVlsSSxFQUFFLGtDQUFrQ2lJLE1BQ2hERSxFQUFpQm5JLEVBQUVrSSxHQUFXdkIsUUFDOUJ5QixFQUFrQnBJLEVBQUVrSSxHQUFXdEIsU0FDL0J5QixFQUFtQlAsRUFBU0MsRUFDNUJPLEVBQXVCSCxFQUFlQyxDQUMxQyxJQUFJRSxFQUF1QkQsRUFBa0IsQ0FDNUMsR0FBSUUsR0FBZUMsU0FBVVQsRUFBWUksRUFBZ0JMLEVBQ3pEOUgsR0FBRWdJLEdBQWNwQixPQUFPMkIsR0FBYzVCLE1BQU0sUUFBUWpHLElBQUksT0FBTyxLQUUvRCxHQUEyQjJILEVBQXZCQyxFQUF5QyxDQUM1QyxHQUFJRyxHQUFjRCxTQUFVVixFQUFXTSxFQUFpQkwsRUFDeEQvSCxHQUFFZ0ksR0FBY3JCLE1BQU04QixHQUFhN0IsT0FBTyxRQUFRbEcsSUFBSSxRQUFROEgsVUFBVUMsRUFBWU4sR0FBZ0IsTUFHdEdSLEVBQUllLElBQU1oQixJQUtiMUgsR0FBRVIsR0FBR2lJLFVBQVksU0FBU2tCLEdBRXpCLE1BQUluQixHQUFRbUIsR0FDSm5CLEVBQVNtQixHQUFTQyxNQUFPbkosS0FBTW9KLE1BQU1DLFVBQVVDLE1BQU1DLEtBQU1DLFVBQVcsSUFDaEQsZ0JBQVhOLElBQXlCQSxNQUczQzNJLEdBQUVrSixNQUFPLGtCQUFxQlAsRUFBUyw4QkFGaENuQixFQUFRakMsS0FBS3FELE1BQU9uSixLQUFNd0osWUFNbkNqSixFQUFFd0QsVUFBVWlFLFVBQVUsU0FFcEJ6SCxHQWNIbUosT0FBT0MsS0FBTyxTQUFVQyxHQVFwQixRQUFTQyxHQUFXaEosR0FDaEIsT0FBUWlKLEVBQVFDLEtBQUtsSixJQUFRLFFBQVFrSixLQUFLbEosR0FQOUMsR0FBSW1KLEdBQVdDLFNBQVNELFNBQ3BCRSxFQUFXRCxTQUFTQyxTQUNwQkosRUFBVUssT0FBT0gsRUFBVyxLQUFPRSxHQUNuQ0UsRUFBTSxRQUFVLFNBQVNMLEtBQUtDLEdBQVUsSUFBSSxJQUFNLGtEQUNsREssRUFBUSxvREFNWixPQUFPLFVBQVNDLEdBRVosR0FBSXpKLEdBQU15SixFQUFFekosR0E0Q1osT0ExQ0ssT0FBT2tKLEtBQUtPLEVBQUVyRyxRQUFVLFFBQVE4RixLQUFLTyxFQUFFQyxXQUFhVixFQUFXaEosS0FJaEV5SixFQUFFekosSUFBTXVKLEVBQ1JFLEVBQUVDLFNBQVcsT0FFYkQsRUFBRTlGLE1BQ0VnRyxFQUFHSCxFQUFNN0ksUUFDTCxRQUNBWCxHQUFPeUosRUFBRTlGLE1BQ0osS0FBS3VGLEtBQUtsSixHQUFPLElBQU0sS0FBTzZJLE9BQU9lLE1BQU1ILEVBQUU5RixNQUNoRCxLQUVOa0csT0FBUSxRQUtQSixFQUFFSyxTQUFXTCxFQUFFTSxXQUNoQk4sRUFBRUssUUFBVUwsRUFBRU0sZUFDUE4sR0FBRU0sVUFHYk4sRUFBRUssUUFBVSxTQUFVRSxHQUNsQixNQUFPLFVBQVNyRyxHQUVScUcsR0FFQUEsRUFBU3RCLEtBQUt2SixNQUNWOEssY0FBZXRHLEVBQUt1RyxRQUFRLElBQU0sSUFHN0J2SixRQUFRLDhDQUErQyxLQUM3RCxhQUlaOEksRUFBRUssVUFJRmYsRUFBTVQsTUFBTW5KLEtBQU13SixhQUk5QkUsT0FBT0MiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUuY29uZmlnKHtcclxuXHRiYXNlVXJsOiAndmVuZG9yJyxcclxuXHRwYXRoczoge1xyXG5cdFx0J2pxdWVyeSc6ICdqcXVlcnkvZGlzdC9qcXVlcnkubWluJyxcclxuXHRcdCdiYWNrYm9uZSc6ICdiYWNrYm9uZS9iYWNrYm9uZScsXHJcblx0XHQndGV4dCc6ICd0ZXh0L3RleHQnLFxyXG5cdFx0J3VuZGVyc2NvcmUnOiAndW5kZXJzY29yZS91bmRlcnNjb3JlJyxcclxuXHRcdCdoYW5kbGViYXJzJzogJ2hhbmRsZWJhcnMvaGFuZGxlYmFycycsXHJcblx0XHQncGFyYWxsYXgnOiAncGFyYWxsYXgvZGVwbG95L3BhcmFsbGF4Lm1pbidcclxuXHR9LFxyXG5cdHNoaW06IHtcclxuXHRcdCdiYWNrYm9uZSc6IHtcclxuXHRcdFx0ZGVwczogWyd1bmRlcnNjb3JlJywgJ2pxdWVyeSddXHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbnZhciBhcHAsXHJcblx0SGFuZGxlYmFycztcclxucmVxdWlyZShbXHJcblx0J2hhbmRsZWJhcnMnLFxyXG5cdCdqcXVlcnknLFxyXG5cdCd0ZXh0JyxcclxuXHQnYmFja2JvbmUnLFxyXG5cdCd1bmRlcnNjb3JlJyxcclxuXHRcInBhcmFsbGF4XCJcclxuXSwgZnVuY3Rpb24oaGFuZGxlYmFycykge1xyXG5cdEhhbmRsZWJhcnMgPSBoYW5kbGViYXJzO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEhhbmRsZWJhcnMgSGVscGVycy0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIm1hdGhcIiwgZnVuY3Rpb24obHZhbHVlLCBvcGVyYXRvciwgcnZhbHVlLCBvcHRpb25zKSB7XHJcblx0ICAgIGx2YWx1ZSA9IHBhcnNlRmxvYXQobHZhbHVlKTtcclxuXHQgICAgcnZhbHVlID0gcGFyc2VGbG9hdChydmFsdWUpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgIHJldHVybiB7XHJcblx0ICAgICAgICBcIitcIjogbHZhbHVlICsgcnZhbHVlLFxyXG5cdCAgICAgICAgXCItXCI6IGx2YWx1ZSAtIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiKlwiOiBsdmFsdWUgKiBydmFsdWUsXHJcblx0ICAgICAgICBcIi9cIjogbHZhbHVlIC8gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIlXCI6IGx2YWx1ZSAlIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiPT1cIjogbHZhbHVlID09IHJ2YWx1ZVxyXG5cdCAgICB9W29wZXJhdG9yXTtcclxuXHR9KTtcclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkNvbmQnLCBmdW5jdGlvbiAodjEsIG9wZXJhdG9yLCB2Miwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XHJcblx0ICAgICAgICBjYXNlICc9PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA9PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPT09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPCc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnJiYnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgJiYgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJ3x8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIHx8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgIH1cclxuXHR9KTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBBcHAgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRBcHAgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHRlbDogJCgnI2FwcCcpLFxyXG5cdFx0ZXZlbnRzOiB7XHJcblx0ICAgIFwiY2xpY2sgYVwiOlwib3BlblwiXHJcblx0ICB9LFxyXG5cdCAgb3BlbjogZnVuY3Rpb24oZSl7XHJcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcclxuXHRcdFx0dmFyIHVybCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xyXG5cdFxyXG5cdFx0XHRzd2l0Y2ggKHVybCl7XHJcblx0XHRcdFx0Y2FzZSBcIiNsZXNzb25zXCI6XHJcblx0XHRcdFx0XHQkKFwiaHRtbCxib2R5XCIpLmNzcyhcIm92ZXJmbG93LXlcIixcImhpZGRlblwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb1RvcCgpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNib29rL3N0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3ZpZGVvL2FudGlxXCI6XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQgICAgXHRhcHAuZ29Cb3R0b20oKTtcclxuXHRcdFx0XHQgICAgXHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0ICAgIH0sMTAwKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludFZpZGVvKFwic3RvcnlcIik7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0fSwxMDApO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRWaWRlbyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHR9LDEwMCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dhbWVzL2FudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdC8vYXBwLnNob3dUZXN0UGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgICBcdFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIsXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0Ly9hcHAuc2hvd1Rlc3RQYWdlcyhcInN0b3J5XCIpO1xyXG5cdFx0XHQgICAgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgICAgXHRcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQkdCw0YHQvdC4INCa0YDRi9C70L7QstCwXCIsXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdC8vYXBwLnNob3dUZXN0UGFnZXMoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHQgICAgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgIFx0XHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiLFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ29Gcm9udFwiOlxyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3Jlc2V0XCI6XHJcblx0XHRcdFx0XHRhcHAudGVzdENsZWFyZWQoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPSBudWxsO1xyXG5cdCAgICAgICAgXHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB0cnVlKTtcclxuXHRcdFx0XHRcdC8vQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjc291bmRcIjpcclxuXHRcdFx0XHRcdGFwcC5hdWRpb1N3aWN0Y2hlcigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNmcm9tVGVzdFRvVmlkZW9cIjpcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJ3d3cudHJldHlha292Z2FsbGVyeS5ydVwiOlxyXG5cdFx0XHRcdFx0d2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cudHJldHlha292Z2FsbGVyeS5ydS8nLCAnX2JsYW5rJyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdCAgfSxcclxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHJcblx0XHRcdHRoaXMub24oJ0Rpc3BsYXk6TG9hZCcsIGZ1bmN0aW9uKGRpc3BsYXlOYW1lKSB7XHJcblx0XHRcdFx0c2VsZi5yZW5kZXIoKTtcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCfQoNC10L3QtNC10YAg0Y3QutGA0LDQvdCwIFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQstC10YDRiNC10L0nKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ9CY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0YDQuNC70L7QttC10L3QuNGPINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdHJvdXRlOiBmdW5jdGlvbihsaW5rLCBtb2R1bGVzTGlzdCl7XHJcblx0XHRcdC8vY29uc29sZS5sb2coXCLQl9Cw0L/Rg9GB0LrQsNC10LwgUm91dGUg0LogXCIsIGxpbmssIFwiIGMg0LzQvtC00YPQu9GP0LzQuCBcIixtb2R1bGVzTGlzdClcclxuXHRcdFx0dGhpcy5saW5rID0gbGluaztcclxuXHRcclxuXHRcdFx0Ly8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INC/0L7QtNC60LvRjtGH0LDQtdC80YvRhSDQvNC+0LTRg9C70LXQuSwg0LXRgdC70Lgg0LjRhSDQvdC10YIg0LfQsNCz0YDRg9C20LDQtdC8INGC0L7Qu9GM0LrQviDRiNCw0LHQu9C+0L1cclxuXHRcdFx0aWYgKCFtb2R1bGVzTGlzdCl7XHJcblx0XHRcdFx0dGhpcy5sb2FkVGVtcGxhdGUobGluayk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8g0J3QsNGI0LvQuCDQvNC+0LTRg9C70YwsINC40LvQuCDQvNC+0LTRg9C70LguINCX0LDQv9GD0YHQutCw0LXQvCDQuNGFINC30LDQs9GA0YPQt9C60YMg0LIg0LrQvtC90YLQtdC60YHRgiDQv9GA0LjQu9C+0LbQtdC90LjRjy5cclxuXHRcdFx0XHR0aGlzLmxvYWRNb2R1bGVzKG1vZHVsZXNMaXN0KTtcclxuXHRcdFx0XHQvLyDQnNC+0LTRg9C70Ywg0LjQu9C4INC80L7QtNGD0LvQuCDQt9Cw0LPRgNGD0LbQtdC90YsuINCd0LDRh9C40L3QsNC10Lwg0LfQsNCz0YDRg9C30LrRgyDRiNCw0LHQu9C+0L3QsC5cclxuXHRcdFx0XHR0aGlzLm9mZignTW9kdWxlOkxvYWQnKS5vbignTW9kdWxlOkxvYWQnLCBmdW5jdGlvbihtb2R1bGVzKSB7XHJcblx0XHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZSh0aGlzLmxpbmspO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0LzQvtC00YPQu9GPKNC10LkpXCInICsgbW9kdWxlcyArICdcIiDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCfQl9Cw0LPRgNGD0LfQutCwINCt0LrRgNCw0L3QsFwiJyArIHRoaXMubGluayArICdcIiDQvdCw0YfQsNC70LDRgdGMJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkVGVtcGxhdGU6IGZ1bmN0aW9uKGRpc3BsYXlOYW1lKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0cmVxdWlyZShbXHJcblx0XHRcdFx0Jy4uLy4uL3RlbXBsYXRlL2Rpc3BsYXlzLycgKyBkaXNwbGF5TmFtZSArICcvJyArIGRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdCd0ZXh0IS4uLy4uL3RlbXBsYXRlL2Rpc3BsYXlzLycgKyBkaXNwbGF5TmFtZSArICcvJyArIGRpc3BsYXlOYW1lICsgJy5odG1sJyxcclxuXHRcdFx0XSwgZnVuY3Rpb24oanMsIGh0bWwpIHtcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCfQrdC60YDQsNC9IFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQs9GA0YPQttC10L0nKTtcclxuXHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0c2VsZi5odG1sID0gJChodG1sKTtcclxuXHRcdFx0XHRzZWxmLmxvYWRDc3MoZGlzcGxheU5hbWUsICdkaXNwbGF5Jyk7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyKCdEaXNwbGF5OkxvYWQnLCBkaXNwbGF5TmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRNb2R1bGVzOiBmdW5jdGlvbihtb2R1bGVzTGlzdCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8v0JfQsNCz0YDRg9C20LDQtdC8INC80L7QtNGD0LvQuC5cclxuXHRcdFx0bW9kdWxlc0xpc3QuZm9yRWFjaChmdW5jdGlvbihtb2R1bGUsIGkpe1xyXG5cdFx0XHRcdC8vIGlmICghXy5pbmNsdWRlKHNlbGYubG9hZGVkTW9kdWxlcywgbW9kdWxlKSkge1xyXG5cdFx0XHRcdFx0cmVxdWlyZShbXHJcblx0XHRcdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgLFxyXG5cdFx0XHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgKyAnLmh0bWwnXHJcblx0XHRcdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCfQnNC+0LTRg9C70YwgXCInICsgbW9kdWxlICsgJ1wiINC30LDQs9GA0YPQttC10L0nKTtcclxuXHRcdFx0XHRcdFx0c2VsZlttb2R1bGUgKyAnSHRtbCddID0gJChodG1sKTtcclxuXHRcdFx0XHRcdFx0Xy5leHRlbmQoc2VsZiwganMpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRDc3MobW9kdWxlLCAnbW9kdWxlJyk7XHJcblx0XHRcdFx0XHRcdGlmKChtb2R1bGVzTGlzdC5sZW5ndGggLSAxKSA9PT0gaSl7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi50cmlnZ2VyKCdNb2R1bGU6TG9hZCcsIG1vZHVsZXNMaXN0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gfWVsc2UgaWYgKG1vZHVsZXNMaXN0Lmxlbmd0aCAtIDEgPT0gaSl7XHJcblx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnbW9kdWxlc0xpc3QubGVuZ3RoJywgbW9kdWxlc0xpc3QubGVuZ3RoKVxyXG5cdFx0XHRcdC8vIFx0c2VsZi50cmlnZ2VyKCdNb2R1bGU6TG9hZCcsIG1vZHVsZXNMaXN0KTtcclxuXHRcdFx0XHQvLyB9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRDc3M6IGZ1bmN0aW9uKG1vZHVsZSwgbWQpIHtcclxuXHRcdFx0dmFyIHBhcnRVcGwgPSBtZCA9PT0gJ2Rpc3BsYXknID8gJ2Rpc3BsYXlzJyA6ICdtb2R1bGVzJztcclxuXHRcdFx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuXHRcdFx0bGluay50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdFx0XHRsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG5cdFx0XHRsaW5rLmhyZWYgPSAnLi4vLi4vdGVtcGxhdGUvJyArIHBhcnRVcGwgKyAnLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgKyAnLmNzcyc7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChsaW5rKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyZW5kZXJIYW5kbGViYXJzVGVtcGxhdGU6IGZ1bmN0aW9uKHNlbGVjdG9yLGRhdGEpIHtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygn0KHQvtC30LTQsNC10Lwg0YjQsNCx0LvQvtC9IEhhbmRsZWJhcnMnLCBzZWxlY3RvciwgZGF0YSk7XHJcblx0XHJcblx0XHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZSgkKHNlbGVjdG9yKS5odG1sKCkpO1xyXG5cdFx0XHRyZXR1cm4gdGVtcGxhdGUoZGF0YSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0YXBwID0gbmV3IEFwcCgpO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIFJvdXRlciAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdHZhciBBcHBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kKHtcclxuXHQgICAgcm91dGVzOiB7XHJcblx0ICAgICAgICBcIlwiOiBcImRlZmF1bHRSb3V0ZVwiLFxyXG5cdCAgICAgICAgXCJsZXNzb25zXCI6XCJnYWxsZXJ5XCIsXHJcblx0ICAgICAgICBcImdhbWVzLzp0ZXN0XCI6XCJnYW1lc1wiLFxyXG5cdCAgICAgICAgXCJib29rLzpuYW1lXCI6XCJyZWFkZXJcIixcclxuXHQgICAgICAgIFwidmlkZW8vOm5hbWVcIjpcInZpZGVvXCJcclxuXHQgICAgICAgIC8vIG1hdGNoZXMgaHR0cDovL2V4YW1wbGUuY29tLyNhbnl0aGluZy1oZXJlXHJcblx0ICAgIH1cclxuXHR9KTtcclxuXHQvLyBJbml0aWF0ZSB0aGUgcm91dGVyXHJcblx0dmFyIHJvdXRlciA9IG5ldyBBcHBSb3V0ZXI7XHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpkZWZhdWx0Um91dGUnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdtYWluU2NyZWVuJywgWydwcmVsb2FkZXInXSk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmdhbGxlcnknLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmdhbWVzJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZWFkZXInLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnZpZGVvJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZXNldCcsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdC8vIFN0YXJ0IEJhY2tib25lIGhpc3RvcnkgYSBuZWNlc3Nhcnkgc3RlcCBmb3IgYm9va21hcmthYmxlIFVSTCdzXHJcblx0QmFja2JvbmUuaGlzdG9yeS5zdGFydCh7cHVzaFN0YXRlIDogZmFsc2V9KTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBCYWNrZ3JvdW5kUmVzaXplciAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdC8qXHJcblx0KiBqUXVlcnkgQmFja2dyb3VuZCB2aWRlbyBwbHVnaW4gZm9yIGpRdWVyeVxyXG5cdCogLS0tXHJcblx0KiBDb3B5cmlnaHQgMjAxMSwgVmljdG9yIENvdWxvbiAoaHR0cDovL3ZpY3RvcmNvdWxvbi5mcilcclxuXHQqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy5cclxuXHQqIGJhc2VkIG9uIGpRdWVyeSBQbHVnaW4gQm9pbGVycGxhdGUgMS4zXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24oJCkge1xyXG5cdFxyXG5cdCAgJC5iYWNrZ3JvdW5kVmlkZW8gPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICB2YXIgZGVmYXVsdHMgPSB7XHJcblx0ICAgICAgdmlkZW9pZDogXCJ2aWRlb19iYWNrZ3JvdW5kXCIsXHJcblx0ICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG5cdCAgICAgIGxvb3A6IGZhbHNlLFxyXG5cdCAgICAgIHByZWxvYWQ6IHRydWVcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgcGx1Z2luID0gdGhpcztcclxuXHRcclxuXHQgICAgcGx1Z2luLnNldHRpbmdzID0ge31cclxuXHRcclxuXHQgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICBwbHVnaW4uc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cdCAgICAgIHBsdWdpbi5lbCA9IGVsO1xyXG5cdFxyXG5cdCAgICAgIGJ1aWxkVmlkZW8oKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgYnVpbGRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgaHRtbCA9ICcnLFxyXG5cdCAgICAgICAgICBwcmVsb2FkU3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGxvb3BTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgX3ByZWxvYWQgPSBwbHVnaW4uc2V0dGluZ3MucHJlbG9hZCxcclxuXHQgICAgICAgICAgX2F1dG9wbGF5ID0gcGx1Z2luLnNldHRpbmdzLmF1dG9wbGF5LFxyXG5cdCAgICAgICAgICBfbG9vcCA9IHBsdWdpbi5zZXR0aW5ncy5sb29wO1xyXG5cdFxyXG5cdCAgICAgIGlmIChfcHJlbG9hZCkge1xyXG5cdCAgICAgICAgcHJlbG9hZFN0cmluZyA9ICdwcmVsb2FkPVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIHByZWxvYWRTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9hdXRvcGxheSkge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnYXV0b3BsYXk9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9sb29wKSB7XHJcblx0ICAgICAgICBsb29wU3RyaW5nID0gJ2xvb3A9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgbG9vcFN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBodG1sICs9ICc8dmlkZW8gaWQ9XCInK3BsdWdpbi5zZXR0aW5ncy52aWRlb2lkKydcIicgKyBwcmVsb2FkU3RyaW5nICsgYXV0b3BsYXlTdHJpbmcgKyBsb29wU3RyaW5nO1xyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucG9zdGVyKSB7XHJcblx0ICAgICAgICBodG1sICs9ICcgcG9zdGVyPVwiJyArIHBsdWdpbi5zZXR0aW5ncy5wb3N0ZXIgKyAnXCIgJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaHRtbCArPSAnc3R5bGU9XCJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7ei1pbmRleDoyO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7XCI+JztcclxuXHQgICAgICBmb3IodmFyIGk9MDsgaSA8IHBsdWdpbi5zZXR0aW5ncy50eXBlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgaHRtbCArPSAnPHNvdXJjZSBzcmM9XCInK3BsdWdpbi5zZXR0aW5ncy5wYXRoK3BsdWdpbi5zZXR0aW5ncy5maWxlbmFtZSsnLicrcGx1Z2luLnNldHRpbmdzLnR5cGVzW2ldKydcIiB0eXBlPVwidmlkZW8vJytwbHVnaW4uc2V0dGluZ3MudHlwZXNbaV0rJ1wiIC8+JztcclxuXHQgICAgICB9XHJcblx0ICAgICAgaHRtbCArPSAnPC92aWRlbz4nO1xyXG5cdCAgICAgIHBsdWdpbi5lbC5hcHBlbmQoaHRtbCk7XHJcblx0ICAgICAgcGx1Z2luLnZpZGVvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwbHVnaW4uc2V0dGluZ3MudmlkZW9pZCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsID0gJChwbHVnaW4udmlkZW9FbCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLmZhZGVJbigwKTtcclxuXHQgICAgICBzZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHNldFByb3BvcnRpb24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIHByb3BvcnRpb24gPSBnZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLndpZHRoKHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLndpZHRoKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLmhlaWdodCk7XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uc2V0dGluZ3MuYWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0ICAgICAgICBjZW50ZXJWaWRlbygpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgZ2V0UHJvcG9ydGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuXHQgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cdCAgICAgIHZhciB3aW5kb3dQcm9wb3J0aW9uID0gd2luZG93V2lkdGggLyB3aW5kb3dIZWlnaHQ7XHJcblx0ICAgICAgdmFyIG9yaWdQcm9wb3J0aW9uID0gcGx1Z2luLnNldHRpbmdzLndpZHRoIC8gcGx1Z2luLnNldHRpbmdzLmhlaWdodDtcclxuXHQgICAgICB2YXIgcHJvcG9ydGlvbiA9IHdpbmRvd0hlaWdodCAvIHBsdWdpbi5zZXR0aW5ncy5oZWlnaHQ7XHJcblx0XHJcblx0ICAgICAgaWYgKHdpbmRvd1Byb3BvcnRpb24gPj0gb3JpZ1Byb3BvcnRpb24pIHtcclxuXHQgICAgICAgIHByb3BvcnRpb24gPSB3aW5kb3dXaWR0aCAvIHBsdWdpbi5zZXR0aW5ncy53aWR0aDtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgcmV0dXJuIHByb3BvcnRpb247XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGNlbnRlclZpZGVvID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgdmFyIGNlbnRlclggPSAoKCQod2luZG93KS53aWR0aCgpID4+IDEpIC0gKHBsdWdpbi4kdmlkZW9FbC53aWR0aCgpID4+IDEpKSB8IDA7XHJcblx0ICAgICAgdmFyIGNlbnRlclkgPSAoKCQod2luZG93KS5oZWlnaHQoKSA+PiAxKSAtIChwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KCkgPj4gMSkpIHwgMDtcclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYWScpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoeyAnbGVmdCc6IGNlbnRlclgsICd0b3AnOiBjZW50ZXJZIH0pO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygnbGVmdCcsIGNlbnRlclgpO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJZJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygndG9wJywgY2VudGVyWSk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGluaXQoKTtcclxuXHRcclxuXHQgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsgc2V0UHJvcG9ydGlvbigpOyB9KTtcclxuXHQgIH1cclxuXHR9KSgkKTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBTZXRQb2ludHMgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHQvKlxyXG5cdCog0JzQsNGB0YjRgtCw0LHQuNGA0YPQtdC8INGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQutC+0L3RgtC10LnQvdC10YAg0YTQvtC90L7QstC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPINC/0L7QtCDRhNCw0LrRgtC40YfQtdGB0LrQuNC1INGA0LDQt9C80LXRgNGLINGE0L7QvdCwXHJcblx0KiAkKGRvY3VtZW50KS5zZXRQb2ludHMoJ2luaXQnKTsgLy8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y9cclxuXHQqICQoZG9jdW1lbnQpLnNldFBvaW50cygnc2V0UHJvcG9ydGlvbicpOyAvLyDQstGL0LfQvtCyINC80LXRgtC+0LTQsCDQv9C10YDQtdGB0YLRgNC+0LXQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xyXG5cdCog0JLQvtC+0LHRidC1LCDQtdGB0LvQuCDQv9GA0L7Qv9C+0YDRhtC40Lgg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQstGB0LXQs9C00LAg0L7QtNC40L3QsNC60L7QstGLINC4INGB0L7RgdGC0LDQstC70Y/RjtGCINC6INC/0YDQuNC80LXRgNGDIDE2OjksINGC0L4g0LzQvtC20L3QviDQuiAuc2V0LXBvaW50cyDQtNC+0LHQsNCy0LjRgtGMIFwicGFkZGluZy1ib3R0b206IDU2LjI1JTtcIiDQuCDRgdC60YDQuNC/0YIg0L3QtdC/0L7QvdCw0LTQvtCx0LjRgtGB0Y9cclxuXHQqINCd0L4g0LIg0L3QsNGI0LXQvCDRgdC70YPRh9Cw0LUg0L/RgNC+0L/QvtGA0YbQuNC4INC40LfQvtCx0YDQsNC20LXQvdC40Lkg0LzQvtCz0YPRgiDQsdGL0YLRjCDQu9GO0LHRi9C80Lgg0Lgg0LfQsNGA0LDQvdC10LUg0L3QtdC40LfQstC10YHRgtC90YssINC/0L7RjdGC0L7QvNGDINC30LTQtdGB0Ywg0YLQvtC70YzQutC+INGB0LrRgNC40L/RgtC+0LxcclxuXHQqL1xyXG5cdChmdW5jdGlvbigkKSB7XHJcblx0XHRcclxuXHRcdHZhciBtZXRob2RzID0ge1xyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oKSB7IFxyXG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7ICQoZG9jdW1lbnQpLnNldFBvaW50cygnc2V0UHJvcG9ydGlvbicpOyB9KTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0UHJvcG9ydGlvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICgkKCcubWFwcy5hY3RpdmUgLnJlc3BvbnNpdmUtaW1hZ2UnKS5sZW5ndGggJiYgJCgnLm1hcHMuYWN0aXZlIC5zZXQtcG9pbnRzJykubGVuZ3RoKSB7IC8vINC10YHQu9C4INC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQvdC+0LLQsNGPINC80L7QtNC10LvRjCDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjQuSDQuCDQtdGB0YLRjCDRgtC+0YfQutC4LCDQt9C90LDRh9C40YIg0L3Rg9C20L3QviDRhNC40LrRgdC40YLRjFxyXG5cdFx0XHRcdFx0dmFyIGltZ1NyYyA9ICQoJy5tYXBzLmFjdGl2ZSAucmVzcG9uc2l2ZS1pbWFnZScpLmNzcygnYmFja2dyb3VuZEltYWdlJykucmVwbGFjZSgvdXJsXFwoXCJ8XCJcXCkvaWcsJycpO1xyXG5cdFx0XHRcdFx0dmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0XHRcdFx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgd2lkdGhJbWcgPSBpbWcud2lkdGg7XHJcblx0XHRcdFx0XHRcdHZhciBoZWlnaHRJbWcgPSBpbWcuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHR2YXIgY29udGFpbmVyU2V0ID0gJCgnLm1hcHMuYWN0aXZlIC5zZXQtcG9pbnRzJykuZ2V0KCk7XHJcblx0XHRcdFx0XHRcdHZhciBjb250YWluZXIgPSAkKCcubWFwcy5hY3RpdmUgLnJlc3BvbnNpdmUtaW1hZ2UnKS5nZXQoKTtcclxuXHRcdFx0XHRcdFx0dmFyIHdpZHRoQ29udGFpbmVyID0gJChjb250YWluZXIpLndpZHRoKCk7XHJcblx0XHRcdFx0XHRcdHZhciBoZWlnaHRDb250YWluZXIgPSAkKGNvbnRhaW5lcikuaGVpZ2h0KCk7XHJcblx0XHRcdFx0XHRcdHZhciBhc3BlY3RyYXRpb0ltYWdlID0gd2lkdGhJbWcvaGVpZ2h0SW1nO1xyXG5cdFx0XHRcdFx0XHR2YXIgYXNwZWN0cmF0aW9Db250YWluZXIgPSB3aWR0aENvbnRhaW5lci9oZWlnaHRDb250YWluZXI7XHJcblx0XHRcdFx0XHRcdGlmIChhc3BlY3RyYXRpb0NvbnRhaW5lciA+IGFzcGVjdHJhdGlvSW1hZ2UpIHsgLy8g0L3QtdGF0LLQsNGC0LrQsCDQstGL0YHQvtGC0YtcclxuXHRcdFx0XHRcdFx0XHR2YXIgcmVzdWx0SGVpZ2h0ID0gcGFyc2VJbnQoKGhlaWdodEltZyAqIHdpZHRoQ29udGFpbmVyKS93aWR0aEltZyk7XHJcblx0XHRcdFx0XHRcdFx0JChjb250YWluZXJTZXQpLmhlaWdodChyZXN1bHRIZWlnaHQpLndpZHRoKCcxMDAlJykuY3NzKCdsZWZ0JywnMCcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmIChhc3BlY3RyYXRpb0NvbnRhaW5lciA8IGFzcGVjdHJhdGlvSW1hZ2UpIHsgIC8vINC90LXRhdCy0LDRgtC60LAg0YjQuNGA0LjQvdGLXHJcblx0XHRcdFx0XHRcdFx0dmFyIHJlc3VsdFdpZHRoID0gcGFyc2VJbnQoKHdpZHRoSW1nICogaGVpZ2h0Q29udGFpbmVyKS9oZWlnaHRJbWcpO1xyXG5cdFx0XHRcdFx0XHRcdCQoY29udGFpbmVyU2V0KS53aWR0aChyZXN1bHRXaWR0aCkuaGVpZ2h0KCcxMDAlJykuY3NzKCdsZWZ0JywtcGFyc2VJbnQoKHJlc3VsdFdpZHRoLXdpZHRoQ29udGFpbmVyKS8yKSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGltZy5zcmMgPSBpbWdTcmM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQkLmZuLnNldFBvaW50cyA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG1ldGhvZHNbbWV0aG9kXSkge1xyXG5cdFx0XHRcdHJldHVybiBtZXRob2RzWyBtZXRob2QgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcclxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgISBtZXRob2QgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5lcnJvciggJ9Cc0LXRgtC+0LQg0YEg0LjQvNC10L3QtdC8ICcgKyAgbWV0aG9kICsgJyDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCINCyIHNldFBvaW50cycgKTtcclxuXHRcdFx0fSBcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0JChkb2N1bWVudCkuc2V0UG9pbnRzKCdpbml0Jyk7XHJcblx0XHRcclxuXHR9KSgkKTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBDcm9zcyBEb21haW4gbGliIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0LyoqXHJcblx0ICogalF1ZXJ5LmFqYXggbWlkIC0gQ1JPU1MgRE9NQUlOIEFKQVggXHJcblx0ICogLS0tXHJcblx0ICogQGF1dGhvciBKYW1lcyBQYWRvbHNleSAoaHR0cDovL2phbWVzLnBhZG9sc2V5LmNvbSlcclxuXHQgKiBAdmVyc2lvbiAwLjExXHJcblx0ICogQHVwZGF0ZWQgMTItSkFOLTEwXHJcblx0ICogLS0tXHJcblx0ICogTm90ZTogUmVhZCB0aGUgUkVBRE1FIVxyXG5cdCAqIC0tLVxyXG5cdCAqIEBpbmZvIGh0dHA6Ly9qYW1lcy5wYWRvbHNleS5jb20vamF2YXNjcmlwdC9jcm9zcy1kb21haW4tcmVxdWVzdHMtd2l0aC1qcXVlcnkvXHJcblx0ICovXHJcblx0XHJcblx0alF1ZXJ5LmFqYXggPSAoZnVuY3Rpb24oX2FqYXgpe1xyXG5cdCAgICBcclxuXHQgICAgdmFyIHByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2wsXHJcblx0ICAgICAgICBob3N0bmFtZSA9IGxvY2F0aW9uLmhvc3RuYW1lLFxyXG5cdCAgICAgICAgZXhSZWdleCA9IFJlZ0V4cChwcm90b2NvbCArICcvLycgKyBob3N0bmFtZSksXHJcblx0ICAgICAgICBZUUwgPSAnaHR0cCcgKyAoL15odHRwcy8udGVzdChwcm90b2NvbCk/J3MnOicnKSArICc6Ly9xdWVyeS55YWhvb2FwaXMuY29tL3YxL3B1YmxpYy95cWw/Y2FsbGJhY2s9PycsXHJcblx0ICAgICAgICBxdWVyeSA9ICdzZWxlY3QgKiBmcm9tIGh0bWwgd2hlcmUgdXJsPVwie1VSTH1cIiBhbmQgeHBhdGg9XCIqXCInO1xyXG5cdCAgICBcclxuXHQgICAgZnVuY3Rpb24gaXNFeHRlcm5hbCh1cmwpIHtcclxuXHQgICAgICAgIHJldHVybiAhZXhSZWdleC50ZXN0KHVybCkgJiYgLzpcXC9cXC8vLnRlc3QodXJsKTtcclxuXHQgICAgfVxyXG5cdCAgICBcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcclxuXHQgICAgICAgIFxyXG5cdCAgICAgICAgdmFyIHVybCA9IG8udXJsO1xyXG5cdCAgICAgICAgXHJcblx0ICAgICAgICBpZiAoIC9nZXQvaS50ZXN0KG8udHlwZSkgJiYgIS9qc29uL2kudGVzdChvLmRhdGFUeXBlKSAmJiBpc0V4dGVybmFsKHVybCkgKSB7XHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICAgICAgLy8gTWFuaXB1bGF0ZSBvcHRpb25zIHNvIHRoYXQgSlNPTlAteCByZXF1ZXN0IGlzIG1hZGUgdG8gWVFMXHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICAgICAgby51cmwgPSBZUUw7XHJcblx0ICAgICAgICAgICAgby5kYXRhVHlwZSA9ICdqc29uJztcclxuXHQgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICBvLmRhdGEgPSB7XHJcblx0ICAgICAgICAgICAgICAgIHE6IHF1ZXJ5LnJlcGxhY2UoXHJcblx0ICAgICAgICAgICAgICAgICAgICAne1VSTH0nLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgdXJsICsgKG8uZGF0YSA/XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKC9cXD8vLnRlc3QodXJsKSA/ICcmJyA6ICc/JykgKyBqUXVlcnkucGFyYW0oby5kYXRhKVxyXG5cdCAgICAgICAgICAgICAgICAgICAgOiAnJylcclxuXHQgICAgICAgICAgICAgICAgKSxcclxuXHQgICAgICAgICAgICAgICAgZm9ybWF0OiAneG1sJ1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICAgICAgLy8gU2luY2UgaXQncyBhIEpTT05QIHJlcXVlc3RcclxuXHQgICAgICAgICAgICAvLyBjb21wbGV0ZSA9PT0gc3VjY2Vzc1xyXG5cdCAgICAgICAgICAgIGlmICghby5zdWNjZXNzICYmIG8uY29tcGxldGUpIHtcclxuXHQgICAgICAgICAgICAgICAgby5zdWNjZXNzID0gby5jb21wbGV0ZTtcclxuXHQgICAgICAgICAgICAgICAgZGVsZXRlIG8uY29tcGxldGU7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIFxyXG5cdCAgICAgICAgICAgIG8uc3VjY2VzcyA9IChmdW5jdGlvbihfc3VjY2Vzcyl7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChfc3VjY2Vzcykge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZha2UgWEhSIGNhbGxiYWNrLlxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF9zdWNjZXNzLmNhbGwodGhpcywge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVRleHQ6IChkYXRhLnJlc3VsdHNbMF0gfHwgJycpXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBZUUwgc2NyZXdzIHdpdGggPHNjcmlwdD5zXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgcmlkIG9mIHRoZW1cclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88c2NyaXB0W14+XSs/XFwvPnw8c2NyaXB0KC58XFxzKSo/XFwvc2NyaXB0Pi9naSwgJycpXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ3N1Y2Nlc3MnKTtcclxuXHQgICAgICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAgICAgIFxyXG5cdCAgICAgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIH0pKG8uc3VjY2Vzcyk7XHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBcclxuXHQgICAgICAgIHJldHVybiBfYWpheC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgIH07XHJcblx0ICAgIFxyXG5cdH0pKGpRdWVyeS5hamF4KTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
